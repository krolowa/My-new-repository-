function init(){for(var a=document.getElementsByTagName("img"),b=0;b<a.length;b++)a[b].getAttribute("data-src")&&a[b].setAttribute("src",a[b].getAttribute("data-src"))}$(window).load(function(){$(".knowledge-ribbon__images--container").css("background-image","none")}),$(function(){var a=function(){$('<div id="imagelightbox-loading"><div></div></div>').appendTo("body")},b=function(){$("#imagelightbox-loading").remove()},c=function(){$('<div id="imagelightbox-overlay"></div>').appendTo("body")},d=function(){$("#imagelightbox-overlay").remove()},e=function(a){$('<button type="button" id="imagelightbox-close" title="Close"></button>').appendTo("body").on("click touchend",function(){return $(this).remove(),a.quitImageLightbox(),!1})},f=function(){$("#imagelightbox-close").remove()},g=function(){var a=$('a[href="'+$("#imagelightbox").attr("src")+'"] img').attr("alt");a.length>0&&$('<div id="imagelightbox-caption">'+a+"</div>").appendTo("body")},h=function(){$("#imagelightbox-caption").remove()},l=function(a,b){var c=$('<button type="button" class="imagelightbox-arrow imagelightbox-arrow-left"></button><button type="button" class="imagelightbox-arrow imagelightbox-arrow-right"></button>');c.appendTo("body"),c.on("click touchend",function(c){c.preventDefault();var d=$(this),e=$(b+'[href="'+$("#imagelightbox").attr("src")+'"]'),f=e.index(b);return d.hasClass("imagelightbox-arrow-left")?(f-=1,$(b).eq(f).length||(f=$(b).length)):(f+=1,$(b).eq(f).length||(f=0)),a.switchImageLightbox(f),!1})},m=function(){$(".imagelightbox-arrow").remove()},n='a[data-imagelightbox="a"]',o=$(n).imageLightbox({onStart:function(){c(),e(o),l(o,n)},onEnd:function(){d(),h(),f(),m(),b()},onLoadStart:function(){h(),a()},onLoadEnd:function(){g(),b(),$(".imagelightbox-arrow").css("display","block")}})}),$(function(){$("[id=autocomplete]").autocomplete({delay:0,minLength:2,source:function(a,b){$.getJSON("http://topsy.fr/beta/model.php?search",{q:a.term},function(a){console.debug(a),b(a.tkey)})},focus:function(a,b){a.preventDefault()},select:function(a,b){a.preventDefault(),console.debug(b.item.label),$("#autocomplete").val(b.item.label)}})}),$("#myAffix").affix({offset:{top:300,bottom:function(){return this.bottom=$(".footer").outerHeight(!0)}}}),window.onload=init;